// @ts-nocheck
export class Popup{constructor(){this.popups=[]}init(){document.querySelectorAll("[data-popup]").forEach((e=>{this.popups.push({element:e,open_button:document.querySelector(`[data-popup-open="#${e.id}"]`),close_button:e.querySelector("[data-popup-close]"),is_open:!1})})),this.event()}event(){document.addEventListener("click",(e=>{this.popups.forEach((t=>{if(e.target===t.open_button||e.target.closest(`[data-popup-open="#${t.element.id}"]`))return e.preventDefault(),void this.open(t);return e.target.closest("[data-popup-close]")||!e.target.closest(".popup__body")&&t.is_open?(e.preventDefault(),this.close(t),void(t.element.is_open=!1)):void 0}))})),document.addEventListener("keydown",(e=>{if("Escape"!==e.key);else{const e=this.popups.find((e=>e.element.classList.contains("_open")));e&&this.close(e)}}))}open(e){e.is_open=!0,e?.element?.classList?.add("_open"),document.body.classList.add("_locked")}close(e){e.is_open=!1,e?.element?.classList?.remove("_open"),document.body.classList.remove("_locked")}}