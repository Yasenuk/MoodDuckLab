// @ts-nocheck
export class ReviewRenderer{constructor(e,i,r){this.container=document.querySelector(e),this.apiEndpoint=i,this.swiper=r,this.loadReviews()}async loadReviews(){try{const e=await fetch(this.apiEndpoint);if(!e.ok)throw new Error("Не вдалося завантажити відгуки");(await e.json()).forEach((e=>this.renderReview(e))),this.swiper.loopedSlides=this.container.children.length,this.swiper.loopDestroy(),this.swiper.loopCreate(),this.swiper.update()}catch(e){console.error("Помилка при завантаженні відгуків:",e)}}renderReview(e){const i=document.createElement("section");i.classList.add("reviews__slide","swiper-slide"),i.innerHTML=`\n      <article class="reviews__card card-review">\n        <header class="card-review__header">\n          <div class="card-review__user-info">\n            <section class="card-review__awatar">\n              <picture>\n                <source srcset="./src/images/awatars/duck-${e.avatar_id}.webp" type="image/webp">\n                <img width="40" height="40" loading="lazy" fetchpriority="low"\n                  src="./src/images/awatars/duck-${e.avatar_id}.png" alt="Аватар користувача">\n              </picture>\n            </section>\n            <div class="card-review__info-group">\n              <h3 class="card-review__user-name">${e.username}</h3>\n              <time class="card-review__datetime" datetime="${e.published_at}" data-time>${new Date(e.published_at).toLocaleDateString()}</time>\n            </div>\n          </div>\n          <ul class="card-review__rating" aria-label="Рейтинг користувача">\n            ${this.renderRating(e.rating)}\n          </ul>\n        </header>\n        <div class="card-review__content">\n          <p class="card-review__paragraph">${e.review_text}</p>\n        </div>\n        <footer class="card-review__footer">\n          <section class="card-review__pluses">\n            <h3 class="card-review__group-title">\n              <i aria-hidden="true" class="icon-plus"></i> Плюси:\n            </h3>\n            <section class="card-review__list card-review__pluses-list">\n              ${this.renderList(e.pros)}\n            </section>\n          </section>\n          <section class="card-review__minuses">\n            <h3 class="card-review__group-title">\n              <i aria-hidden="true" class="icon-minus"></i> Мінуси:\n            </h3>\n            <section class="card-review__list card-review__minusess-list">\n              ${this.renderList(e.cons)}\n            </section>\n          </section>\n        </footer>\n      </article>\n    `,this.container.appendChild(i)}renderRating(e){let i="";for(let r=1;r<=5;r++)i+=`<li class="card-review__rating-item${r<=e?" card-review__rating-item_active":""}">\n          <i aria-hidden="true" class="icon-duck"></i>\n        </li>`;return i}renderList(e){return e?e.split(",").map((e=>`<span>${e.trim()}</span>`)).join(", "):""}addReview(e){this.renderReview(e),this.swiper.loopedSlides=this.container.children.length,this.swiper.loopDestroy(),this.swiper.loopCreate(),this.swiper.update(),this.swiper.slideTo(this.container.children.length-1)}}